<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript">

    function changeFocus(e){
        if (e.keyCode==13){
            document.getElementById('PASS').focus();
        }
    }
    function onEnter(e){
        if (e.keyCode==13){
            validar();
        }
    }

	function validar (){
		let nome = document.getElementById('USUARIO').value;
		let senha = document.getElementById('PASS').value;
        let payload = JSON.stringify({ USUARIO : nome, PASS : senha });
        let xhr = new XMLHttpRequest();

        let loadingElement = document.querySelector(".overlay-loader");
        loadingElement.style.display = "block";

        xhr.open("POST", "valida_dados.php", true);
        xhr.setRequestHeader("Content-Type", "application/json");

        xhr.onreadystatechange = function(p){
            if ( xhr.readyState === 4 && xhr.status === 200 ){
                console.log(xhr.responseText);
            }
            if ( xhr.readyState === 4 ) loadingElement.style.display = "none";
        };

        xhr.send(payload);
	}

    /*
    * $.post( "valida_dados.php",{ USUARIO : nome, PASS : senha })
     .done(function(result) {
     data = JSON.parse(result);
     if(data.success){
     return document.getElementById("response").innerHTML = (
     document.getElementById('entrar').submit());
     }
     return document.getElementById("response").innerHTML = (
     "Falha: Usuário ou Senha inválidos");
     })
     .fail(function(result) {
     document.getElementById("response").innerHTML = "Erro no Servi?o";
     });
    * */
</script>
<head>
	<title>Controle de Contas</title>
    <link rel="stylesheet" type="text/css" href="regra-formatacao.css" />
</head>
<body>
<div class="overlay-loader">
    <div class="loader">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>

    <div id="caixa" action="#">
      <div id="response">&nbsp;</div>
      <p>Usuario:<input type="search" name="USUARIO" id="USUARIO" value="" onkeyup="changeFocus(event)"></p><br>
  	  <p>Senha:<input type="password" name="PASS" id="PASS" value="" onkeypress="javascript:onEnter(event)"></p><br>
        <p><button onclick="validar()">Validar</button></p>
  	</div>
</body>
</html>
